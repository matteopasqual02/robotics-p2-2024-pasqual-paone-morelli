<launch>
    <!-- Run RViz with a specific configuration file -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find second_project)/cfg/config.rviz" output="screen"/>
    <!-- Simulated time -->
    <param name="/use_sim_time" value="true"/>

    <!-- Pubblica una trasformazione statica tra map e odom
    <node pkg="tf2_ros" type="static_transform_publisher" name="static_transform_publisher" args="0 0 0 0 0 0 map /ugv/odom" />-->

    <!-- odom to tf-->
    <node name="odom_to_tf" pkg="second_project" type="odom_to_tf" output="screen">
        <remap from="input_odom" to="/ugv/odom"/>
        <param name="child_frame" value="/odom"/>
        <param name="root_frame" value="map"/>
    </node>

<!-- odom to base_link-->
    <node name="odom_to_base_link" pkg="second_project" type="odom_to_base_link" output="screen">
        <remap from="input_odom" to="/ugv/odom"/>
        <param name="child_frame" value="/base_link"/>
        <param name="root_frame" value="/odom"/>
    </node>
 <!--   <node pkg="tf2_ros" type="static_transform_publisher" name="lidar_link"  args=" 0  0 0  0 0 0 1 base_link /scan_tf "/>-->

    <!-- pointcloud to laserscan-->
    <node name="pointcloud_to_laserscan" pkg="pointcloud_to_laserscan" type="pointcloud_to_laserscan_node">
        <remap from="cloud_in" to="/ugv/rslidar_points"/>
        <remap from="scan" to="/scan"/>
    </node>

    <!-- Trasformazione base_link a laser
    <node pkg="tf" type="static_transform_publisher" name="base_link_to_laser" args="0 0 0 0 0 0 base_link /scan_tf 100" />-->

    <!-- Trasformazione odom a base_link
    <node pkg="tf" type="static_transform_publisher" name="odom_to_base_link" args="0 0 0 0 0 0 odom base_link 100" /> -->

    <!-- Trasformazione map a odom
    <node pkg="tf" type="static_transform_publisher" name="map_to_odom" args="0 0 0 0 0 0 map odom 100" />-->


    <!-- lidar heder to wheel odom -->
    <node name="lidar_remap" pkg="second_project" type="lidar_remap" output="screen"/>-->

    <!--><node pkg="tf2_ros" type="static_transform_publisher" name="base_link"  args=" 0  0 0  0 0 0 1 base_footprint base_link"/>
    <node pkg="tf2_ros" type="static_transform_publisher" name="body_link"  args=" 0  0 0  0 0 0 1 base_link body_link "/>
    <node pkg="tf2_ros" type="static_transform_publisher" name="imu_link"  args=" 0  0 0  0 0 0 1 base_link imu_link "/>
    <node pkg="tf2_ros" type="static_transform_publisher" name="lidar_link"  args=" 0  0 0  0 0 0 1 base_link scan "/>
    <node pkg="tf2_ros" type="static_transform_publisher" name="oak_frame"  args=" 0  0 0  0 0 0 1 base_link oak-d-base-frame" />-->

    <!-- slam toolbox-->
    <node pkg="slam_toolbox" type="async_slam_toolbox_node" name="slam_toolbox" output="screen">
        <rosparam command="load" file="$(find second_project)/cfg/mapper_params.yaml" />
    </node>

    <!-- gmapping
    <node pkg="gmapping" type="slam_gmapping" name="gmapping" output="screen">
        <remap from="scan_tf" to="base_scan" />
        <param name="xmax" value="5"/>
        <param name="ymax" value="5"/>
        <param name="xmin" value="-5"/>
        <param name="ymin" value="-5"/>
        <param name="delta" value="0.05"/>
    </node>
    -->
    <!-- gmapping
    <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
        <param name="base_frame" value="base_link"/>
        <param name="odom_frame" value="odom"/>
        <param name="map_frame" value="map"/>
        <param name="laser_scan_topic" value="/scan_tf"/>
    </node>-->

    

</launch>



